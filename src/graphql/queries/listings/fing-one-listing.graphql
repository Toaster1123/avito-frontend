query GetOneListing($id: ID!) {
  findOneListing(id: $id) {
    id
    name
    description
    price
    city
    images
    createdAt
    categoryBreadcrumb {
      name
    }
    category {
      id
      name
    }
    user {
      id
      name
      email
      rating
      profileImage
      createdAt
      receivedReviews {
        id
      }
      listings {
        active
      }
    }
  }
}

fragment ListingWithBreadcrumb on Listing {
  id
  name
  price
  city
  images
  createdAt
  category {
    id
    name
    categoryBreadcrumb {
      id
      name
    }
  }
}

query FindAllListings($limit: Int, $offset: Int, $active: Boolean, $categoryId: ID) {
  findAllListings(limit: $limit, offset: $offset, active: $active, categoryId: $categoryId) {
    listings {
      ... on Listing {
        id
        name
        price
        city
        images
        createdAt
        category {
          id
          name
        }
      }

      # Условно добавляем breadcrumb только если categoryId указан
      ... on Listing @include(if: $categoryId) {
        category {
          categoryBreadcrumb {
            id
            name
          }
        }
      }

      # Или используем фрагмент
      ...ListingWithBreadcrumb @include(if: $categoryId)
    }
    hasMore
  }
}
